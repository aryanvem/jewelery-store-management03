<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RV Jewellery - Professional Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* Login Screen */
        .login-container {
            max-width: 450px;
            margin: 100px auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h1 {
            font-size: 2em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .blessing {
            font-size: 1.2em;
            color: #764ba2;
            margin-bottom: 20px;
        }

        .login-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 5px;
            border-radius: 10px;
        }

        .login-tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s;
        }

        .login-tab.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .social-login {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }

        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .social-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .social-btn.google { color: #4285F4; }
        .social-btn.facebook { color: #1877F2; }

        .divider {
            text-align: center;
            margin: 20px 0;
            position: relative;
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #e9ecef;
        }

        .divider span {
            background: white;
            padding: 0 15px;
            position: relative;
            color: #6c757d;
            font-size: 14px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: none;
        }

        .container.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h1 {
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header-left .blessing {
            font-size: 1.1em;
            opacity: 0.9;
            color: white;
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .user-info {
            text-align: right;
        }

        .user-info .username {
            font-size: 1.1em;
            font-weight: 600;
        }

        .user-info .role {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
            border: none;
            background: transparent;
            font-size: 16px;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            color: #667eea;
            background: white;
            border-bottom: 3px solid #667eea;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #000;
        }

        .image-upload-container {
            position: relative;
            width: 200px;
            height: 200px;
            border: 3px dashed #e9ecef;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
            background: #f8f9fa;
        }

        .image-upload-container:hover {
            border-color: #667eea;
            background: #f0f0ff;
        }

        .image-upload-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-upload-label {
            text-align: center;
            color: #6c757d;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: #f8f9fa;
        }

        .product-details {
            padding: 20px;
        }

        .product-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .product-info {
            color: #6c757d;
            margin: 8px 0;
            font-size: 14px;
        }

        .stock-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
        }

        .in-stock {
            background: #d4edda;
            color: #155724;
        }

        .out-stock {
            background: #f8d7da;
            color: #721c24;
        }

        .product-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .product-actions button {
            flex: 1;
            padding: 8px;
            font-size: 14px;
        }

        .cart-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item h4 {
            color: #495057;
            margin-bottom: 5px;
        }

        .cart-actions {
            display: flex;
            gap: 10px;
        }

        .qty-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .qty-btn {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .qty-btn:hover {
            background: #667eea;
            color: white;
        }

        .qty-display {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            font-size: 16px;
        }

        .checkout-section {
            background: white;
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }

        .checkout-section h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-size: 1.1em;
        }

        .total-row.final {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            border-top: 2px solid #e9ecef;
            padding-top: 15px;
            margin-top: 10px;
        }

        .gst-toggle {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #ccc;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-switch.active {
            background: #28a745;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.3s;
        }

        .toggle-switch.active::after {
            left: 32px;
        }

        .invoice-preview {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .invoice-header {
            text-align: center;
            border-bottom: 3px solid #667eea;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .invoice-header h2 {
            font-size: 2.5em;
            color: #667eea;
        }

        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .invoice-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .invoice-table td {
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .modal-header h3 {
            color: #667eea;
        }

        .close-btn {
            font-size: 28px;
            cursor: pointer;
            color: #6c757d;
            transition: all 0.3s;
        }

        .close-btn:hover {
            color: #dc3545;
        }

        .upi-section {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .upi-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .upi-btn {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-weight: 600;
        }

        .upi-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .upi-btn.phonepe {
            color: #5f259f;
        }

        .upi-btn.gpay {
            color: #34A853;
        }

        .upi-btn.paytm {
            color: #00BAF2;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-state p {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        @media print {
            body * {
                visibility: hidden;
            }
            .invoice-preview, .invoice-preview * {
                visibility: visible;
            }
            .invoice-preview {
                position: absolute;
                left: 0;
                top: 0;
            }
        }

        .customer-view {
            background: white;
        }

        .customer-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .customer-header h1 {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .view-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="checkbox"] {
            width: auto;
        }
    </style>
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="loginScreen">
        <div class="login-header">
            <div class="blessing">üïâÔ∏è ‡•ê ‡§∂‡•ç‡§∞‡•Ä ‡§ó‡§£‡•á‡§∂‡§æ‡§Ø ‡§®‡§Æ‡§É üïâÔ∏è</div>
            <h1>üíé RV Jewellery</h1>
            <p>Professional Management System</p>
        </div>

        <div class="login-tabs">
            <div class="login-tab active" onclick="switchLoginTab('admin')">Admin</div>
            <div class="login-tab" onclick="switchLoginTab('customer')">Customer View</div>
        </div>

        <div id="adminLogin">
            <div class="social-login">
                <button class="social-btn google" onclick="socialLogin('google')">
                    <span>üîç</span> Continue with Google
                </button>
                <button class="social-btn facebook" onclick="socialLogin('facebook')">
                    <span>üìò</span> Continue with Facebook
                </button>
            </div>

            <div class="divider"><span>OR</span></div>

            <div class="form-group">
                <label>Username</label>
                <input type="text" id="loginUsername" placeholder="Enter username">
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="password" id="loginPassword" placeholder="Enter password" onkeypress="if(event.key==='Enter') login()">
            </div>

            <button class="btn btn-primary" style="width: 100%;" onclick="login()">üîê Login</button>

            <div class="divider"><span>OR</span></div>

            <div class="form-group">
                <label>Login with OTP</label>
                <input type="tel" id="otpPhone" placeholder="Enter mobile number" maxlength="10">
            </div>
            <button class="btn btn-success" style="width: 100%;" onclick="sendOTP()">üì± Send OTP</button>
        </div>

        <div id="customerLogin" style="display: none;">
            <button class="btn btn-primary" style="width: 100%;" onclick="enterCustomerView()">
                üëÅÔ∏è View Products as Customer
            </button>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="container" id="mainApp">
        <div class="header">
            <div class="header-left">
                <h1>üíé RV Jewellery</h1>
                <div class="blessing">üïâÔ∏è ‡•ê ‡§∂‡•ç‡§∞‡•Ä ‡§ó‡§£‡•á‡§∂‡§æ‡§Ø ‡§®‡§Æ‡§É üïâÔ∏è</div>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="username" id="displayUsername">Admin</div>
                    <div class="role">Administrator</div>
                </div>
                <button class="btn btn-danger" onclick="logout()">üö™ Logout</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('dashboard')">üè† Dashboard</button>
            <button class="tab" onclick="switchTab('inventory')">üì¶ Inventory</button>
            <button class="tab" onclick="switchTab('billing')">üßæ Billing</button>
            <button class="tab" onclick="switchTab('reports')">üìä Reports</button>
        </div>

        <!-- Dashboard Tab -->
        <div class="tab-content active" id="dashboard">
            <h2 style="margin-bottom: 20px;">üìä Dashboard Overview</h2>
            <div class="stats-grid" id="statsGrid"></div>
        </div>

        <!-- Inventory Tab -->
        <div class="tab-content" id="inventory">
            <h2 style="margin-bottom: 20px;">üì¶ Product Inventory</h2>
            
            <div class="form-group">
                <label>Product Image</label>
                <div class="image-upload-container" onclick="document.getElementById('productImage').click()">
                    <img id="productImagePreview" style="display: none;">
                    <div class="image-upload-label" id="imageUploadLabel">
                        <div style="font-size: 3em;">üì∑</div>
                        <div>Click to upload image</div>
                    </div>
                </div>
                <input type="file" id="productImage" accept="image/*" style="display: none;" onchange="previewImage(this)">
            </div>

            <div class="form-group">
                <label>Product Name *</label>
                <input type="text" id="productName" placeholder="Gold Necklace">
            </div>

            <div class="form-group">
                <label>Category *</label>
                <select id="productCategory" onchange="toggleOtherCategory(this)">
                    <option value="Necklace">Necklace</option>
                    <option value="Ring">Ring</option>
                    <option value="Earrings">Earrings</option>
                    <option value="Bracelet">Bracelet</option>
                    <option value="Pendant">Pendant</option>
                    <option value="Bangles">Bangles</option>
                    <option value="Other">Other (Specify)</option>
                </select>
            </div>

            <div class="form-group" id="otherCategoryGroup" style="display: none;">
                <label>Specify Category *</label>
                <input type="text" id="otherCategory" placeholder="Enter custom category">
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="form-group">
                    <label>Price (‚Çπ) *</label>
                    <input type="number" id="productPrice" placeholder="25000">
                </div>

                <div class="form-group">
                    <label>Weight (grams) *</label>
                    <input type="number" id="productWeight" step="0.01" placeholder="10.5">
                </div>

                <div class="form-group">
                    <label>Purity</label>
                    <select id="productPurity">
                        <option value="22K">22K</option>
                        <option value="18K">18K</option>
                        <option value="14K">14K</option>
                        <option value="24K">24K</option>
                        <option value="Silver 925">Silver 925</option>
                        <option value="Platinum">Platinum</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Stock Status</label>
                    <select id="productStock">
                        <option value="In Stock">In Stock</option>
                        <option value="Out of Stock">Out of Stock</option>
                    </select>
                </div>
            </div>

            <button class="btn btn-primary" onclick="addProduct()">‚ûï Add Product</button>
            <button class="btn btn-secondary" onclick="clearProductForm()">üîÑ Clear Form</button>

            <h3 style="margin-top: 40px; margin-bottom: 20px;">Current Inventory</h3>
            <div class="product-grid" id="productList"></div>
        </div>

        <!-- Billing Tab -->
        <div class="tab-content" id="billing">
            <h2 style="margin-bottom: 20px;">üßæ Create Invoice</h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                <div>
                    <div class="form-group">
                        <label>Customer Name *</label>
                        <input type="text" id="customerName" placeholder="Enter customer name">
                    </div>

                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="customerPhone" placeholder="+91 XXXXXXXXXX">
                    </div>

                    <div class="form-group">
                        <label>Address</label>
                        <textarea id="customerAddress" rows="3" placeholder="Enter customer address"></textarea>
                    </div>
                </div>

                <div>
                    <h3 style="margin-bottom: 15px;">Shopping Cart</h3>
                    <div id="cartDisplay"></div>
                </div>
            </div>

            <h3 style="margin-bottom: 15px;">Select Products</h3>
            <div class="product-grid" id="billingProductList"></div>

            <div class="checkout-section">
                <h3>Checkout Summary</h3>
                
                <div class="gst-toggle">
                    <label style="flex: 1; margin: 0;">Include GST (3%)</label>
                    <div class="toggle-switch" id="gstToggle" onclick="toggleGST()"></div>
                </div>

                <div class="total-row">
                    <span>Subtotal:</span>
                    <span id="subtotalAmount">‚Çπ0</span>
                </div>
                <div class="total-row" id="gstRow" style="display: none;">
                    <span>GST (3%):</span>
                    <span id="gstAmount">‚Çπ0</span>
                </div>
                <div class="total-row final">
                    <span>Total:</span>
                    <span id="totalAmount">‚Çπ0</span>
                </div>

                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button class="btn btn-primary" onclick="generateInvoice()">üìÑ Generate Invoice</button>
                    <button class="btn btn-warning" onclick="clearCart()">üóëÔ∏è Clear Cart</button>
                </div>

                <div class="upi-section" id="upiSection" style="display: none;">
                    <h3>üí≥ Payment Options</h3>
                    <div class="upi-options">
                        <button class="upi-btn phonepe" onclick="processUPIPayment('phonepe')">
                            <div style="font-size: 2em;">üì±</div>
                            <div>PhonePe</div>
                        </button>
                        <button class="upi-btn gpay" onclick="processUPIPayment('gpay')">
                            <div style="font-size: 2em;">üí≥</div>
                            <div>Google Pay</div>
                        </button>
                        <button class="upi-btn paytm" onclick="processUPIPayment('paytm')">
                            <div style="font-size: 2em;">üí∞</div>
                            <div>Paytm</div>
                        </button>
                    </div>
                </div>
            </div>

            <div id="invoiceSection" style="display: none; margin-top: 40px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                    <h3>Invoice Preview</h3>
                    <div>
                        <button class="btn btn-primary" onclick="printInvoice()">üñ®Ô∏è Print</button>
                        <button class="btn btn-success" onclick="downloadInvoice()">üíæ Download</button>
                    </div>
                </div>
                <div class="invoice-preview" id="invoicePreview"></div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div class="tab-content" id="reports">
            <h2 style="margin-bottom: 20px;">üìä Sales Reports</h2>

            <button class="btn btn-warning" onclick="openPasswordModal()">üîê Change Password</button>

            <h3 style="margin-top: 30px; margin-bottom: 15px;">Invoice History</h3>
            <div id="invoiceHistory"></div>
        </div>
    </div>

    <!-- Customer View -->
    <div class="customer-view" id="customerView" style="display: none;">
        <div class="customer-header">
            <h1>üíé RV Jewellery</h1>
            <div class="blessing">üïâÔ∏è ‡•ê ‡§∂‡•ç‡§∞‡•Ä ‡§ó‡§£‡•á‡§∂‡§æ‡§Ø ‡§®‡§Æ‡§É üïâÔ∏è</div>
            <p style="font-size: 1.2em; margin-top: 10px;">Explore Our Premium Collection</p>
        </div>
        <div class="view-toggle">
            <button class="btn btn-danger" onclick="exitCustomerView()">‚Üê Back to Login</button>
        </div>
        <div style="padding: 40px;">
            <div class="product-grid" id="customerProductList"></div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div class="modal" id="editProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è Edit Product</h3>
                <span class="close-btn" onclick="closeEditModal()">&times;</span>
            </div>
            <input type="hidden" id="editProductId">
            
            <div class="form-group">
                <label>Product Image</label>
                <div class="image-upload-container" onclick="document.getElementById('editProductImage').click()">
                    <img id="editProductImagePreview" style="display: none;">
                    <div class="image-upload-label" id="editImageUploadLabel">
                        <div style="font-size: 3em;">üì∑</div>
                        <div>Click to change image</div>
                    </div>
                </div>
                <input type="file" id="editProductImage" accept="image/*" style="display: none;" onchange="previewEditImage(this)">
            </div>

            <div class="form-group">
                <label>Product Name</label>
                <input type="text" id="editProductName">
            </div>
            <div class="form-group">
                <label>Category</label>
                <input type="text" id="editProductCategory">
            </div>
            <div class="form-group">
                <label>Price (‚Çπ)</label>
                <input type="number" id="editProductPrice">
            </div>
            <div class="form-group">
                <label>Weight (g)</label>
                <input type="number" id="editProductWeight" step="0.01">
            </div>
            <div class="form-group">
                <label>Purity</label>
                <input type="text" id="editProductPurity">
            </div>
            <div class="form-group">
                <label>Stock Status</label>
                <select id="editProductStock">
                    <option value="In Stock">In Stock</option>
                    <option value="Out of Stock">Out of Stock</option>
                </select>
            </div>
            <button class="btn btn-primary" onclick="saveProductEdit()">üíæ Save Changes</button>
            <button class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal" id="passwordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîê Change Password</h3>
                <span class="close-btn" onclick="closePasswordModal()">&times;</span>
            </div>
            <div class="form-group">
                <label>Current Password</label>
                <input type="password" id="currentPassword">
            </div>
            <div class="form-group">
                <label>New Password</label>
                <input type="password" id="newPassword">
            </div>
            <div class="form-group">
                <label>Confirm New Password</label>
                <input type="password" id="confirmPassword">
            </div>
            <button class="btn btn-primary" onclick="changePassword()">üîê Change Password</button>
            <button class="btn btn-secondary" onclick="closePasswordModal()">Cancel</button>
        </div>
    </div>

    <script>
        // Global Variables
        let products = JSON.parse(localStorage.getItem('rvProducts')) || [];
        let cart = [];
        let invoices = JSON.parse(localStorage.getItem('rvInvoices')) || [];
        let currentUser = JSON.parse(localStorage.getItem('rvCurrentUser')) || null;
        let credentials = JSON.parse(localStorage.getItem('rvCredentials')) || {username: 'admin', password: 'admin123'};
        let gstEnabled = false;
        let currentProductImage = null;

        // Initialize App
        window.onload = function() {
            if(currentUser) {
                showMainApp();
            }
        };

        // Login Tab Switching
        function switchLoginTab(tab) {
            document.querySelectorAll('.login-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if(tab === 'admin') {
                document.getElementById('adminLogin').style.display = 'block';
                document.getElementById('customerLogin').style.display = 'none';
            } else {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('customerLogin').style.display = 'block';
            }
        }

        // Social Login (Frontend Demo)
        function socialLogin(provider) {
            alert(`üîê ${provider.charAt(0).toUpperCase() + provider.slice(1)} login would be integrated here.\n\nThis requires backend API integration with OAuth.`);
            // In production: window.location.href = `/auth/${provider}`;
        }

        // OTP Login (Frontend Demo)
        function sendOTP() {
            const phone = document.getElementById('otpPhone').value.trim();
            if(!phone || phone.length !== 10) {
                alert('‚ö†Ô∏è Please enter a valid 10-digit mobile number!');
                return;
            }
            alert(`üì± OTP would be sent to ${phone}\n\nThis requires backend SMS API integration (e.g., Twilio, MSG91).`);
            // In production: Send OTP via backend API
        }

        // Login Function
        function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();

            if(!username || !password) {
                alert('‚ö†Ô∏è Please enter username and password!');
                return;
            }

            if(username === credentials.username && password === credentials.password) {
                currentUser = {username: username, role: 'admin'};
                localStorage.setItem('rvCurrentUser', JSON.stringify(currentUser));
                showMainApp();
            } else {
                alert('‚ùå Invalid username or password!');
            }
        }

        // Show Main App
        function showMainApp() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').classList.add('active');
            document.getElementById('displayUsername').textContent = currentUser.username;
            updateStats();
            displayProducts();
            displayBillingProducts();
            displayInvoiceHistory();
        }

        // Logout Function
        function logout() {
            if(confirm('Are you sure you want to logout?')) {
                currentUser = null;
                localStorage.removeItem('rvCurrentUser');
                document.getElementById('loginScreen').style.display = 'block';
                document.getElementById('mainApp').classList.remove('active');
                document.getElementById('loginUsername').value = '';
                document.getElementById('loginPassword').value = '';
            }
        }

        // Customer View
        function enterCustomerView() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('customerView').style.display = 'block';
            displayCustomerProducts();
        }

        function exitCustomerView() {
            document.getElementById('customerView').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'block';
        }

        function displayCustomerProducts() {
            const container = document.getElementById('customerProductList');
            if(products.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No products available</p></div>';
                return;
            }

            container.innerHTML = products.filter(p => p.stock === 'In Stock').map(product => `
                <div class="product-card">
                    ${product.image ? `<img src="${product.image}" class="product-image">` : '<div class="product-image" style="display: flex; align-items: center; justify-content: center; font-size: 4em;">üíé</div>'}
                    <div class="product-details">
                        <h3>${product.name}</h3>
                        <div class="product-info">üìÅ ${product.category}</div>
                        <div class="product-info">üí∞ ‚Çπ${product.price.toLocaleString('en-IN')}</div>
                        <div class="product-info">‚öñÔ∏è ${product.weight}g | ‚ú® ${product.purity}</div>
                        <span class="stock-badge in-stock">‚úÖ Available</span>
                    </div>
                </div>
            `).join('');
        }

        // Tab Switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');

            if(tabName === 'dashboard') updateStats();
            if(tabName === 'reports') displayInvoiceHistory();
        }

        // Toggle Other Category
        function toggleOtherCategory(select) {
            const otherGroup = document.getElementById('otherCategoryGroup');
            if(select.value === 'Other') {
                otherGroup.style.display = 'block';
                document.getElementById('otherCategory').required = true;
            } else {
                otherGroup.style.display = 'none';
                document.getElementById('otherCategory').required = false;
                document.getElementById('otherCategory').value = '';
            }
        }

        // Image Preview
        function previewImage(input) {
            if(input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentProductImage = e.target.result;
                    document.getElementById('productImagePreview').src = e.target.result;
                    document.getElementById('productImagePreview').style.display = 'block';
                    document.getElementById('imageUploadLabel').style.display = 'none';
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function previewEditImage(input) {
            if(input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('editProductImagePreview').src = e.target.result;
                    document.getElementById('editProductImagePreview').style.display = 'block';
                    document.getElementById('editImageUploadLabel').style.display = 'none';
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Add Product
        function addProduct() {
            const name = document.getElementById('productName').value.trim();
            let category = document.getElementById('productCategory').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const weight = parseFloat(document.getElementById('productWeight').value);
            const purity = document.getElementById('productPurity').value;
            const stock = document.getElementById('productStock').value;

            if(category === 'Other') {
                const otherCat = document.getElementById('otherCategory').value.trim();
                if(!otherCat) {
                    alert('‚ö†Ô∏è Please specify the category!');
                    return;
                }
                category = otherCat;
            }

            if(!name || !price || !weight) {
                alert('‚ö†Ô∏è Please fill all required fields!');
                return;
            }

            const product = {
                id: Date.now(),
                name,
                category,
                price,
                weight,
                purity,
                stock,
                image: currentProductImage
            };

            products.push(product);
            localStorage.setItem('rvProducts', JSON.stringify(products));
            
            displayProducts();
            displayBillingProducts();
            clearProductForm();
            alert('‚úÖ Product added successfully!');
        }

        // Clear Product Form
        function clearProductForm() {
            document.getElementById('productName').value = '';
            document.getElementById('productCategory').value = 'Necklace';
            document.getElementById('productPrice').value = '';
            document.getElementById('productWeight').value = '';
            document.getElementById('productPurity').value = '22K';
            document.getElementById('productStock').value = 'In Stock';
            document.getElementById('otherCategory').value = '';
            document.getElementById('otherCategoryGroup').style.display = 'none';
            document.getElementById('productImagePreview').style.display = 'none';
            document.getElementById('imageUploadLabel').style.display = 'block';
            document.getElementById('productImage').value = '';
            currentProductImage = null;
        }

        // Display Products
        function displayProducts() {
            const container = document.getElementById('productList');
            
            if(products.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No products yet. Add your first product!</p></div>';
                return;
            }

            container.innerHTML = products.map(product => `
                <div class="product-card">
                    ${product.image ? `<img src="${product.image}" class="product-image">` : '<div class="product-image" style="display: flex; align-items: center; justify-content: center; font-size: 4em;">üíé</div>'}
                    <div class="product-details">
                        <h3>${product.name}</h3>
                        <div class="product-info">üìÅ ${product.category}</div>
                        <div class="product-info">üí∞ ‚Çπ${product.price.toLocaleString('en-IN')}</div>
                        <div class="product-info">‚öñÔ∏è ${product.weight}g | ‚ú® ${product.purity}</div>
                        <span class="stock-badge ${product.stock === 'In Stock' ? 'in-stock' : 'out-stock'}">
                            ${product.stock === 'In Stock' ? '‚úÖ' : '‚ùå'} ${product.stock}
                        </span>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="openEditModal(${product.id})">‚úèÔ∏è Edit</button>
                            <button class="btn btn-danger" onclick="deleteProduct(${product.id})">üóëÔ∏è Delete</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Display Billing Products
        function displayBillingProducts() {
            const container = document.getElementById('billingProductList');
            
            const availableProducts = products.filter(p => p.stock === 'In Stock');
            
            if(availableProducts.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No products in stock</p></div>';
                return;
            }

            container.innerHTML = availableProducts.map(product => `
                <div class="product-card">
                    ${product.image ? `<img src="${product.image}" class="product-image">` : '<div class="product-image" style="display: flex; align-items: center; justify-content: center; font-size: 4em;">üíé</div>'}
                    <div class="product-details">
                        <h3>${product.name}</h3>
                        <div class="product-info">üìÅ ${product.category}</div>
                        <div class="product-info">üí∞ ‚Çπ${product.price.toLocaleString('en-IN')}</div>
                        <div class="product-info">‚öñÔ∏è ${product.weight}g | ‚ú® ${product.purity}</div>
                        <button class="btn btn-success" style="width: 100%; margin-top: 10px;" onclick="addToCart(${product.id})">üõí Add to Cart</button>
                    </div>
                </div>
            `).join('');
        }

        // Delete Product
        function deleteProduct(productId) {
            if(confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== productId);
                localStorage.setItem('rvProducts', JSON.stringify(products));
                displayProducts();
                displayBillingProducts();
                alert('‚úÖ Product deleted successfully!');
            }
        }

        // Cart Functions
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if(!product) return;

            const existingItem = cart.find(item => item.id === productId);
            
            if(existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({...product, quantity: 1});
            }

            displayCart();
            alert('‚úÖ Added to cart!');
        }

        function displayCart() {
            const container = document.getElementById('cartDisplay');
            
            if(cart.length === 0) {
                container.innerHTML = '<div class="empty-state"><p style="font-size: 1em; margin: 0;">Cart is empty</p></div>';
                updateTotals();
                return;
            }

            container.innerHTML = cart.map((item, index) => `
                <div class="cart-item">
                    <div class="cart-item-details">
                        <h4>${item.name}</h4>
                        <div class="product-info">‚Çπ${item.price.toLocaleString('en-IN')} √ó ${item.quantity} = ‚Çπ${(item.price * item.quantity).toLocaleString('en-IN')}</div>
                    </div>
                    <div class="cart-actions">
                        <div class="qty-controls">
                            <button class="qty-btn" onclick="updateQuantity(${index}, -1)">‚àí</button>
                            <span class="qty-display">${item.quantity}</span>
                            <button class="qty-btn" onclick="updateQuantity(${index}, 1)">+</button>
                        </div>
                        <button class="btn btn-danger" onclick="removeFromCart(${index})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');

            updateTotals();
        }

        function updateQuantity(index, change) {
            cart[index].quantity += change;
            if(cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }
            displayCart();
        }

        function removeFromCart(index) {
            if(confirm('Remove this item from cart?')) {
                cart.splice(index, 1);
                displayCart();
            }
        }

        function clearCart() {
            if(confirm('Clear all items from cart?')) {
                cart = [];
                displayCart();
            }
        }

        function updateTotals() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const gst = gstEnabled ? subtotal * 0.03 : 0;
            const total = subtotal + gst;

            document.getElementById('subtotalAmount').textContent = '‚Çπ' + subtotal.toLocaleString('en-IN');
            document.getElementById('gstAmount').textContent = '‚Çπ' + gst.toLocaleString('en-IN');
            document.getElementById('totalAmount').textContent = '‚Çπ' + total.toLocaleString('en-IN');

            if(total > 0) {
                document.getElementById('upiSection').style.display = 'block';
            } else {
                document.getElementById('upiSection').style.display = 'none';
            }
        }

        function toggleGST() {
            gstEnabled = !gstEnabled;
            const toggle = document.getElementById('gstToggle');
            const gstRow = document.getElementById('gstRow');
            
            if(gstEnabled) {
                toggle.classList.add('active');
                gstRow.style.display = 'flex';
            } else {
                toggle.classList.remove('active');
                gstRow.style.display = 'none';
            }
            
            updateTotals();
        }

        // UPI Payment (Frontend Demo)
        function processUPIPayment(provider) {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const finalTotal = gstEnabled ? total * 1.03 : total;
            
            alert(`üí≥ Processing payment via ${provider.toUpperCase()}\nAmount: ‚Çπ${finalTotal.toLocaleString('en-IN')}\n\nThis requires backend integration with payment gateway API.`);
            
            // In production:
            // 1. Generate payment link via backend
            // 2. Redirect to UPI app or show QR code
            // 3. Verify payment status via webhook
        }

        // Generate Invoice
        function generateInvoice() {
            const customerName = document.getElementById('customerName').value.trim();
            const customerPhone = document.getElementById('customerPhone').value.trim();
            const customerAddress = document.getElementById('customerAddress').value.trim();

            if(!customerName) {
                alert('‚ö†Ô∏è Please enter customer name!');
                return;
            }

            if(cart.length === 0) {
                alert('‚ö†Ô∏è Cart is empty! Add products first.');
                return;
            }

            const invoiceNumber = 'RVJ-' + Date.now();
            const invoiceDate = new Date().toLocaleString('en-IN');
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const gst = gstEnabled ? subtotal * 0.03 : 0;
            const total = subtotal + gst;

            const invoice = {
                id: Date.now(),
                invoiceNumber,
                date: invoiceDate,
                customer: {name: customerName, phone: customerPhone, address: customerAddress},
                items: cart,
                subtotal,
                gst,
                gstEnabled,
                total
            };

            invoices.push(invoice);
            localStorage.setItem('rvInvoices', JSON.stringify(invoices));

            const invoiceHTML = `
                <div class="invoice-header">
                    <p style="font-size: 1.2em; margin-bottom: 10px; color: #764ba2;">üïâÔ∏è ‡•ê ‡§∂‡•ç‡§∞‡•Ä ‡§ó‡§£‡•á‡§∂‡§æ‡§Ø ‡§®‡§Æ‡§É üïâÔ∏è</p>
                    <h2>üíé RV JEWELLERY</h2>
                    <p>Phone: +91 XXXXXXXXXX | Email: rvjewellery@example.com</p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>Bill To:</h4>
                        <p><strong>${customerName}</strong></p>
                        <p>Phone: ${customerPhone}</p>
                        ${customerAddress ? `<p>${customerAddress}</p>` : ''}
                    </div>
                    <div style="text-align: right;">
                        <p><strong>Invoice #:</strong> ${invoiceNumber}</p>
                        <p><strong>Date:</strong> ${invoiceDate}</p>
                    </div>
                </div>

                <table class="invoice-table">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Category</th>
                            <th>Weight</th>
                            <th>Price</th>
                            <th>Qty</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${cart.map(item => `
                            <tr>
                                <td>${item.name}</td>
                                <td>${item.category}</td>
                                <td>${item.weight}g</td>
                                <td>‚Çπ${item.price.toLocaleString('en-IN')}</td>
                                <td>${item.quantity}</td>
                                <td>‚Çπ${(item.price * item.quantity).toLocaleString('en-IN')}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>

                <div style="text-align: right; margin-top: 20px;">
                    <p><strong>Subtotal:</strong> ‚Çπ${subtotal.toLocaleString('en-IN')}</p>
                    ${gstEnabled ? `<p><strong>GST (3%):</strong> ‚Çπ${gst.toLocaleString('en-IN')}</p>` : ''}
                    <p style="font-size: 1.3em; font-weight: bold; color: #667eea; margin-top: 10px;">
                        Total: ‚Çπ${total.toLocaleString('en-IN')}
                    </p>
                </div>

                <div style="margin-top: 40px; text-align: center; padding-top: 20px; border-top: 2px solid #dee2e6;">
                    <p><em>Thank you for your business!</em></p>
                    <p style="font-size: 0.9em; color: #6c757d;">Please visit again</p>
                </div>
            `;

            document.getElementById('invoicePreview').innerHTML = invoiceHTML;
            document.getElementById('invoiceSection').style.display = 'block';
            
            document.getElementById('invoiceSection').scrollIntoView({behavior: 'smooth'});
        }

        function printInvoice() {
            window.print();
        }

        function downloadInvoice() {
            const invoiceText = document.getElementById('invoicePreview').innerText;
            const blob = new Blob([invoiceText], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'invoice_' + Date.now() + '.txt';
            a.click();
        }

        // Edit Product Modal
        function openEditModal(productId) {
            const product = products.find(p => p.id === productId);
            if(!product) return;

            document.getElementById('editProductId').value = product.id;
            document.getElementById('editProductName').value = product.name;
            document.getElementById('editProductCategory').value = product.category;
            document.getElementById('editProductPrice').value = product.price;
            document.getElementById('editProductWeight').value = product.weight;
            document.getElementById('editProductPurity').value = product.purity;
            document.getElementById('editProductStock').value = product.stock;

            if(product.image) {
                document.getElementById('editProductImagePreview').src = product.image;
                document.getElementById('editProductImagePreview').style.display = 'block';
                document.getElementById('editImageUploadLabel').style.display = 'none';
            } else {
                document.getElementById('editProductImagePreview').style.display = 'none';
                document.getElementById('editImageUploadLabel').style.display = 'block';
            }

            document.getElementById('editProductModal').classList.add('active');
        }

        function closeEditModal() {
            document.getElementById('editProductModal').classList.remove('active');
            document.getElementById('editProductImage').value = '';
        }

        function saveProductEdit() {
            const id = parseInt(document.getElementById('editProductId').value);
            const name = document.getElementById('editProductName').value.trim();
            const category = document.getElementById('editProductCategory').value;
            const price = parseFloat(document.getElementById('editProductPrice').value);
            const weight = parseFloat(document.getElementById('editProductWeight').value);
            const purity = document.getElementById('editProductPurity').value;
            const stock = document.getElementById('editProductStock').value;

            if(!name || !price || !weight) {
                alert('‚ö†Ô∏è Please fill all required fields!');
                return;
            }

            const productIndex = products.findIndex(p => p.id === id);
            if(productIndex !== -1) {
                const newImage = document.getElementById('editProductImagePreview').src;
                products[productIndex] = {
                    ...products[productIndex],
                    name,
                    category,
                    price,
                    weight,
                    purity,
                    stock,
                    image: newImage !== window.location.href ? newImage : products[productIndex].image
                };

                localStorage.setItem('rvProducts', JSON.stringify(products));
                displayProducts();
                displayBillingProducts();
                closeEditModal();
                alert('‚úÖ Product updated successfully!');
            }
        }

        // Password Management
        function openPasswordModal() {
            document.getElementById('passwordModal').classList.add('active');
        }

        function closePasswordModal() {
            document.getElementById('passwordModal').classList.remove('active');
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }

        function changePassword() {
            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirm = document.getElementById('confirmPassword').value;

            if(!current || !newPass || !confirm) {
                alert('‚ö†Ô∏è Please fill all fields!');
                return;
            }

            if(current !== credentials.password) {
                alert('‚ùå Current password is incorrect!');
                return;
            }

            if(newPass.length < 4) {
                alert('‚ö†Ô∏è New password must be at least 4 characters!');
                return;
            }

            if(newPass !== confirm) {
                alert('‚ö†Ô∏è Passwords do not match!');
                return;
            }

            credentials.password = newPass;
            localStorage.setItem('rvCredentials', JSON.stringify(credentials));
            closePasswordModal();
            alert('‚úÖ Password changed successfully!');
        }

        // Update Stats
        function updateStats() {
            const totalProducts = products.length;
            const inStock = products.filter(p => p.stock === 'In Stock').length;
            const totalInvoices = invoices.length;
            const totalRevenue = invoices.reduce((sum, inv) => sum + inv.total, 0);

            document.getElementById('statsGrid').innerHTML = `
                <div class="stat-card">
                    <h3>${totalProducts}</h3>
                    <p>Total Products</p>
                </div>
                <div class="stat-card">
                    <h3>${inStock}</h3>
                    <p>In Stock</p>
                </div>
                <div class="stat-card">
                    <h3>${totalInvoices}</h3>
                    <p>Total Sales</p>
                </div>
                <div class="stat-card">
                    <h3>‚Çπ${totalRevenue.toLocaleString('en-IN')}</h3>
                    <p>Total Revenue</p>
                </div>
            `;
        }

        // Display Invoice History
        function displayInvoiceHistory() {
            const historyDiv = document.getElementById('invoiceHistory');
            
            if(invoices.length === 0) {
                historyDiv.innerHTML = '<div class="empty-state"><p>No invoices yet</p></div>';
                return;
            }

            historyDiv.innerHTML = invoices.slice().reverse().map(inv => `
                <div class="cart-item">
                    <div class="cart-item-details">
                        <h4>${inv.invoiceNumber}</h4>
                        <div class="product-info">Customer: ${inv.customer.name} | Date: ${inv.date}</div>
                        <div class="product-info">Items: ${inv.items.length} | Total: ‚Çπ${inv.total.toLocaleString('en-IN')}</div>
                    </div>
                    <button class="btn btn-danger" onclick="deleteInvoice(${inv.id})">üóëÔ∏è Delete</button>
                </div>
            `).join('');
        }

        // Delete Invoice
        function deleteInvoice(invoiceId) {
            if(confirm('Are you sure you want to delete this invoice? This cannot be undone.')) {
                invoices = invoices.filter(inv => inv.id !== invoiceId);
                localStorage.setItem('rvInvoices', JSON.stringify(invoices));
                displayInvoiceHistory();
                updateStats();
                alert('‚úÖ Invoice deleted successfully!');
            }
        }
    </script>
</body>
</html>
